### General description

- Проект представляет из себя интерфейс для управления рассылками (newsletters).
- В проекте используется библиотека python-crontab, для работы с регулярными задачами.
  Поэтому важно:
  - Работать с проектом либо используя Linux, либо в среде Ubuntu для Windows.
  - Установить все зависимости проекта.
  - Установить соотвествующую вашему часовому поясу настройку TIME_ZONE в config/settings.py, и другие настройки, указанные в env.sample
  - Убедиться, что механизм cron запущен - sudo service cron status, и sudo service cron restart, при необходимости.



### Сущности системы

- Приложение newsletter
    - Newsletter - все аттрибуты и настройки рассылки
    - NewsletterAttempts - попытки отправок рассылок (и разовые, и регулярные)
    - EmailServerResponse - (ответы серверов почтовых адресов клиентов)
    - Schedule - настройка расписания рассылок (daily, weekly, monthly режимы) - меню доступно для superuser.
- Приложение client
    - Client - клиенты компании (те, кому отпрвляются рассылки)
- Приложение blog
    - Blog - блоги, продвигающие сервис
- Приложение users
    - User - пользователи сервиса

### Права доступа пользователей

- Обычный пользователь
    - CRUD для своих рассылок и клиентов
    - Отправка разовых рассылок (из своего списка рассылок) своим клиентам
    - Запуск регулярной рассылки (из своего списка рассылок) своим клиентам
- Manager (группа "manager")
    - Включает все права обычных пользователей
    - Удаление запущенных рассылок (remove_regular_newsletter)
    - Просмотр списка пользователей сервиса
    - Блокировка пользователей сервиса (block_user)
    - Просмотр всех рассылок и клиентов
- Superuser
    - Включает все доступные права
    - Дополнительно в Manager menu интерфейса реализован CRUD для модели User
    - Дополнительно в Manager menu реализована возможность настраивать расписания рассылок (daily, weekly, monthly)

### Создание superuser 
python manage.py csu

### Команды для рассылок 
- python manage.py action_send_newsletter <newsletter_id> - разовая отправка. One-time newsletter в пользовательском интерфейсе.
- python manage.py action_launch_regular_newsletter <newsletter_id> - запуск регулярной рассылки. Страница Regular newsletter в пользовательском интерфейсе.
- python manage.py action_remove_cronjob <newsletter_id> - удаление cronjobs  по заданному newsletter. Страница Regular newsletter в пользовательском интерфейсе.

Log-инфо о запущенных регулярных/отправленных разовых/удаленных рассылках - в файле
custom_command.log

Проверить наличие запущенных cronjob в ОС - команда crontab -l в командной строке.
Проверить наличие запущенных cronjob в пользовательском интервейск - страница Regular Newslrtters.